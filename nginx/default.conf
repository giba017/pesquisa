server {
    listen 80;
    server_name localhost, pesquisa, 127.0.0.1;

    client_max_body_size 50m;

    location = /favicon.ico { access_log off; log_not_found off; }
    location /static/ {
        root /var/www/admin-portal;
    }

    location /media/ {
        root /var/www/admin-portal;
    }

    location / {
        proxy_pass http://172.16.238.11:8002;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
#    location /_next/static/ {
#        alias NEXTJS_PATH/.next/static/;
#        expires max;
#        add_header Cache-Control "public";
#    }
#    location /_next/ {
#        proxy_pass  http://frontend:3000;
#        proxy_set_header Host $http_host;
#        proxy_set_header X-Real-IP $remote_addr;
#        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#        proxy_set_header X-Forwarded-Proto $scheme;
#        #rewrite ^/_next/image?url=(.*)/$1 break; # para remover o prefixo _next
#    }
#
#    location /_next/image {
#        proxy_pass http://frontend:3000;
#    }
#    location /_next/static/media {
#        proxy_pass http://frontend:3000;
#    }
#    location /_next/static/css {
#        proxy_pass http://frontend:3000;
#    }
#    location /_next/static/chunk {
#        proxy_pass http://frontend:3000;
#    }
#    location /post {
#        proxy_pass http://frontend:3000;
#    }
#
#    location /_next/static/chunks/app {
#        proxy_pass http://frontend:3000;
#    }
#    location /next/ {
#        alias NEXTJS_PATH/public/next/;
#        expires max;
#        add_header Cache-Control "public";
#    }
    
}
